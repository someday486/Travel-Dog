{% extends 'index.html' %}
{% block title %}여행 일정 만들기{% endblock %}
{% block content %}
<div style="margin-top: 0;">
    <style>
        #previewContainer {
            padding: 50px;
        }

        .trip-card-title {
            padding-top: 60px;
        }
    </style>
    <h5 class="text-center mb-4">{{ trip.user }}의 "{{trip.region}}" 여행기</h5>
    <table class="table table-bordered table-hover text-center">
        <thead class="thead-dark">
            <tr>
                <th>Day</th>
                <th>장소</th>
                <th>지출비용</th>
            </tr>
        </thead>
        <tbody>
            {% for tripdetail in tripdetails %}
            <tr>
                <td>{{ tripdetail.day }}</td>
                <td>{{ tripdetail.destination.name }}</td>
                <td>{{ tripdetail.expense }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</div><br>
<hr>

<h3 style="top: 50px;" class="trip-card-title">Trip Cards</h3>  
<div id="cardContainer" style="display: flex; flex-wrap: wrap; justify-content: center; gap: 20px;">
    {% for tripdetail in tripdetails %}
    <div class="card" style="width: 20rem; margin: 20px; height: auto;">
        {% if tripdetail.images %}
            <img class="card-img-top" src="/media/images/{{ tripdetail.id }}/{{ tripdetail.images.0 }}" alt="image" style="width:100%">
        {% else %}
            <img class="card-img-top" src="/path/to/default/image.jpg" alt="default image" style="width:100%">
        {% endif %}
        <div class="card-body">
            <h4 class="card-title">DAY  -  {{ tripdetail.day }}</h4>
            <p class="card-text">{{ tripdetail.destination.name }}</p>
            <p class="card-context">{{ tripdetail.context }}</p>
            <a href="javascript:void(0)" class="btn btn-primary" 
            onclick="window.location.href='/review/add/{{tripdetail.id}}/'">This Trip</a>
        </div>
    </div>
    {% endfor %}
</div>

<div id="previewContainer" class="card" style="width:20rem;margin:20px 0 24px 0"> 
    {% for key, values in fileList.items %}
        {% for k, value in values.items %}
            {% for v in value %}
                <div class="image-card">
                    <a href='/review/add/{{ k }}'><img src="/media/{{ trip.id }}/{{ key }}/{{ v }}"></a>
                </div>
            {% endfor %}
        {% endfor %}
    {% endfor %}
</div>
{% endblock %}
