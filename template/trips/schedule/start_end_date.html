<h3 class="text-center">step.2 일정 선택</h3>
<div class="calendar-container">
    <div class="calendar-header">
        <button type="button" class="btn" onclick="changeMonth(-1)">이전 달</button>
        <h4 id="calendar-month"></h4>
        <button type="button" class="btn" onclick="changeMonth(1)">다음 달</button>
    </div>
    <div id="calendar" class="calendar"></div>
</div>

<script>
    let currentDate = new Date();
    let startDate = null;
    let endDate = null;

    function updateCalendar() {
        const calendarElement = document.getElementById('calendar');
        const calendarMonth = document.getElementById('calendar-month');
        calendarElement.innerHTML = '';
        calendarMonth.textContent = `${currentDate.getFullYear()}년 ${currentDate.getMonth() + 1}월`;

        const firstDayOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1).getDay();
        const daysInMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() + 1, 0).getDate();

        for (let i = 0; i < firstDayOfMonth; i++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'day disabled';
            calendarElement.appendChild(dayElement);
        }

        for (let i = 1; i <= daysInMonth; i++) {
            const dayElement = document.createElement('div');
            dayElement.className = 'day';
            dayElement.textContent = i;
            dayElement.addEventListener('click', function() {
                handleDateSelection(i);
            });
            calendarElement.appendChild(dayElement);
        }

        highlightSelection();
    }

    function handleDateSelection(day) {
        if (!startDate || (startDate && endDate)) {
            clearSelection();
            startDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
            endDate = null;
            highlightSelection();
        } else {
            endDate = new Date(currentDate.getFullYear(), currentDate.getMonth(), day);
            highlightSelection();
        }
    }

    function highlightSelection() {
        if (startDate && !endDate) {
            const dayIndex = startDate.getDate() - 1 + new Date(startDate.getFullYear(), startDate.getMonth(), 1).getDay();
            document.querySelectorAll('.day')[dayIndex].classList.add('selected');
        } else if (startDate && endDate) {
            const start = Math.min(startDate.getDate(), endDate.getDate());
            const end = Math.max(startDate.getDate(), endDate.getDate());
            for (let i = start; i <= end; i++) {
                const dayIndex = i - 1 + new Date(startDate.getFullYear(), startDate.getMonth(), 1).getDay();
                document.querySelectorAll('.day')[dayIndex].classList.add('selected');
            }
        }
    }

    function clearSelection() {
        document.querySelectorAll('.day').forEach(day => day.classList.remove('selected'));
    }

    function changeMonth(offset) {
        currentDate.setMonth(currentDate.getMonth() + offset);
        updateCalendar();
    }

    updateCalendar();
</script>
